TOP=..

INCLUDES=-I $TOP/lib_core/commons -I $TOP/lib_toolchain/objects -I $TOP/macroprocessor

SRC= Parser_asm5.ml Lexer_asm5.ml Parse_asm5.ml \
 Check_asm5.ml Resolve_labels5.ml \
 Main.ml

SYSLIBS=str.cma unix.cma
LIBS=$TOP/lib_core/commons/lib.cma $TOP/lib_toolchain/objects/lib.cma \
  $TOP/macroprocessor/lib.cma

# or use Principia spirit! THE assembler! so call it simply 'assembler' ? :)
PROG=5a

<$TOP/mkconfig
<$TOP/mkprog
#<$TOP/mkparser

AUTOGEN=Lexer_asm5.ml Parser_asm5.ml Parser_asm5.mli

beforedepend:V: $AUTOGEN
depend:V: beforedepend

Lexer_asm5.ml:D: Lexer_asm5.mll
	$OCAMLLEX $prereq
Parser_asm5.ml Parser_asm5.mli: Parser_asm5.mly
	$OCAMLYACC $prereq

NUKEFILES=$AUTOGEN

loc:V:
   wc -l Lexer_asm5.mll Parser_asm5.mly Parse_asm5.ml* Main.ml \
    Check_asm5.ml Resolve_labels5.ml \
     $TOP/lib_toolchain/objects/Ast_asm5.ml $TOP/lib_toolchain/objects/Object_code5.ml*
