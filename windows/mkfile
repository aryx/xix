# -*- sh -*-
TOP=..

SRC= \
  Cursors.ml Terminal.ml \
  Window.ml \
  File.ml Device.ml Fileserver.ml \
  Globals.ml \
  Processes_winshell.ml Wm.ml Threads_window.ml  \
  Mouse_action.ml             Thread_mouse.ml \
                              Thread_keyboard.ml \
  Virtual_draw.ml Virtual_mouse.ml Virtual_cons.ml \
  Dev_wm.ml \
  Dev_textual_window.ml Dev_graphical_window.ml \
                              Threads_fileserver.ml \
  test.ml CLI.ml Main.ml

INCLUDES=-I $TOP/lib_core/commons -I $TOP/lib_core/system/plan9 \
 -I $TOP/lib_graphics/geometry -I $TOP/lib_graphics/draw \
 -I $TOP/lib_graphics/input -I $TOP/lib_graphics/ui

LIBS=$TOP/lib_core/commons/lib.cma $TOP/lib_core/regexps/lib.cma \
  $TOP/lib_core/system/plan9/lib.cma \
 $TOP/lib_graphics/geometry/lib.cma $TOP/lib_graphics/draw/lib.cma \
 $TOP/lib_graphics/input/lib.cma $TOP/lib_graphics/ui/lib.cma

SYSLIBS=unix.cma threads.cma

#PTOP=$TOP/principia
#objtype=386
##alt:</$TOP/mkconfig
#CAMLLIB=$PTOP/ROOT/$objtype/lib/ocaml
#OCAMLC=/usr/local/bin/ocamlrun /usr/local/bin/ocamlc $INCLUDES
#CCLIBS= -cclib $CAMLLIB/libunix.a -cclib $CAMLLIB/libthreads.a -cclib $CAMLLIB/main.8 -cclib $TOP/lib_core/system/plan9/libplan9.a

PROG=orio

EXTRA_FLAGS=-thread

<$TOP/mkconfig
#<$TOP/mkfiles/mkprog
<$TOP/mkfiles/mklib

#ROOT=/home/pad/plan9/ROOT/
#test:V:
#	cp $PROG $ROOT/tests/xxx/
#    cd /home/pad/plan9; make disk; make run
#
#loc:V:
#	wc -l *.ml*
